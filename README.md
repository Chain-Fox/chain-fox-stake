# Chain-Fox DAO

Chain-Fox DAO æ˜¯ä¸€ä¸ªåœ¨ Solana åŒºå—é“¾ä¸Šè¿è¡Œçš„å»ä¸­å¿ƒåŒ–è‡ªæ²»ç»„ç»‡ï¼ŒåŒ…å«è´¨æŠ¼åè®®å’Œæ²»ç†ç³»ç»Ÿã€‚ç”¨æˆ·å¯ä»¥è´¨æŠ¼ CFX ä»£å¸è·å¾—æŠ•ç¥¨æƒå’Œæ½œåœ¨æ”¶ç›Šï¼Œå¹¶å‚ä¸é¡¹ç›®çš„æ²»ç†å†³ç­–ã€‚

## é¡¹ç›®ç»„ä»¶

é¡¹ç›®åŒ…å«ä»¥ä¸‹ä¸»è¦åˆçº¦ï¼š

1. **è´¨æŠ¼æ ¸å¿ƒåˆçº¦ (cfx-stake-core)**ï¼š
   - ç®¡ç†ç”¨æˆ·è´¨æŠ¼çš„ CFX ä»£å¸
   - å¤„ç†è´¨æŠ¼å’Œè§£é™¤è´¨æŠ¼æ“ä½œ
   - ç»´æŠ¤ç”¨æˆ·è´¨æŠ¼è®°å½•

2. **å¥–åŠ±åˆçº¦ (cfx-rewards)**ï¼š
   - å¤„ç†è´¨æŠ¼å¥–åŠ±åˆ†é…
   - ç®¡ç†å¥–åŠ±æ± 
   - è®¡ç®—ç”¨æˆ·å¥–åŠ±

3. **æµåŠ¨æ€§åˆçº¦ (cfx-liquidity)**ï¼š
   - ç®¡ç†æµåŠ¨æ€§åˆ†é…
   - å¤„ç†æµåŠ¨æ€§æå–
   - ä¸äº¤æ˜“å¹³å°äº¤äº’

4. **å¤šç­¾é’±åŒ…åˆçº¦ (chain-fox-dao)**ï¼š
   - å®ç°å¤šç­¾é’±åŒ…åŠŸèƒ½
   - ç®¡ç†å›¢é˜Ÿèµ„é‡‘å®‰å…¨
   - å¤„ç†æµåŠ¨æ€§ç®¡ç†æ“ä½œ

## åˆçº¦åœ°å€

### Devnet éƒ¨ç½²åœ°å€

- **CFX Stake Core**: `426MdbCio9rvekWxFiz2AmEQwBXAkASZqmrf3eW1RQAo`
- **CFX Rewards**: `BgWUGrXRKF3pgVEgstwau11AGgynhsZwyiHhXoC5bn6t`
- **CFX Liquidity**: `3Hn6Smh85GBpwWdAvu4sCgg5TjsQtUsuAsYp5t4yyqKn`

### é‡è¦å¸¸é‡

- **CFX Token Mint**: `RhFVq1Zt81VvcoSEMSyCGZZv5SwBdA8MV7w4HEMpump`
- **Team Wallet**: `12qdnh5cXQhAuD3w4TMyZy352CEndxzgKx1da7BHmPF7`
- **æœ€ä½è´¨æŠ¼é‡‘é¢**: 10,000 CFX
- **é»˜è®¤é”å®šæœŸ**: 30 å¤©

## ğŸ“š æ–‡æ¡£ä¸­å¿ƒ

æˆ‘ä»¬ä¸ºä¸åŒè§’è‰²çš„ç”¨æˆ·æä¾›äº†å®Œæ•´çš„æ–‡æ¡£ï¼š

- **[ğŸ“ æ–‡æ¡£ä¸­å¿ƒ](./docs/)** - å®Œæ•´çš„æ–‡æ¡£ç´¢å¼•å’Œå¯¼èˆª
- **[ğŸ¨ å‰ç«¯å¼€å‘](./docs/frontend/)** - å‰ç«¯é›†æˆæŒ‡å—å’ŒAPIæ–‡æ¡£
- **[ğŸ“‹ åˆçº¦æ–‡æ¡£](./docs/contracts/)** - æ™ºèƒ½åˆçº¦æŠ€æœ¯æ–‡æ¡£
- **[ğŸ“– ç”¨æˆ·æŒ‡å—](./docs/guides/)** - ç”¨æˆ·ä½¿ç”¨è¯´æ˜ (ä¸­è‹±æ–‡)
- **[ğŸ§ª æµ‹è¯•æ–‡æ¡£](./docs/testing/)** - æµ‹è¯•æ–¹æ³•å’Œè°ƒè¯•æŒ‡å—
- **[ğŸš€ éƒ¨ç½²æ–‡æ¡£](./docs/deployment/)** - éƒ¨ç½²æŒ‡å—å’Œè¿ç»´æ–‡æ¡£

## ç›®å½•

- [ç¯å¢ƒè¦æ±‚](#ç¯å¢ƒè¦æ±‚)
- [æœ¬åœ°å¼€å‘ç¯å¢ƒè®¾ç½®](#æœ¬åœ°å¼€å‘ç¯å¢ƒè®¾ç½®)
- [é¡¹ç›®æ„å»ºä¸æµ‹è¯•](#é¡¹ç›®æ„å»ºä¸æµ‹è¯•)
- [åˆçº¦å¼€å‘æµç¨‹](#åˆçº¦å¼€å‘æµç¨‹)
- [æµ‹è¯•ç½‘éƒ¨ç½²](#æµ‹è¯•ç½‘éƒ¨ç½²)
  - [é…ç½® Solana ç½‘ç»œå’Œé’±åŒ…](#1-é…ç½®-solana-ç½‘ç»œå’Œé’±åŒ…)
  - [è·å–æµ‹è¯•ç½‘ SOL](#2-è·å–æµ‹è¯•ç½‘-sol)
  - [æ›´æ–°é¡¹ç›®é…ç½®](#3-æ›´æ–°é¡¹ç›®é…ç½®)
  - [åœ¨æµ‹è¯•ç½‘éƒ¨ç½² CFX ä»£å¸ (SPL ä»£å¸)](#4-åœ¨æµ‹è¯•ç½‘éƒ¨ç½²-cfx-ä»£å¸-spl-ä»£å¸)
  - [è®¡ç®—ç¨‹åºç§Ÿé‡‘](#5-è®¡ç®—ç¨‹åºç§Ÿé‡‘)
  - [éƒ¨ç½²åˆ°æµ‹è¯•ç½‘](#6-éƒ¨ç½²åˆ°æµ‹è¯•ç½‘)
  - [è¿è¡Œéƒ¨ç½²è„šæœ¬](#7-è¿è¡Œéƒ¨ç½²è„šæœ¬)
- [ä¸»ç½‘éƒ¨ç½²](#ä¸»ç½‘éƒ¨ç½²)
  - [å‡†å¤‡ä¸»ç½‘éƒ¨ç½²é’±åŒ…](#1-å‡†å¤‡ä¸»ç½‘éƒ¨ç½²é’±åŒ…)
  - [æ›´æ–°é¡¹ç›®é…ç½®](#2-æ›´æ–°é¡¹ç›®é…ç½®)
  - [åœ¨ä¸»ç½‘éƒ¨ç½² CFX ä»£å¸ (SPL ä»£å¸)](#3-åœ¨ä¸»ç½‘éƒ¨ç½²-cfx-ä»£å¸-spl-ä»£å¸)
  - [è®¡ç®—ä¸»ç½‘ç¨‹åºç§Ÿé‡‘](#4-è®¡ç®—ä¸»ç½‘ç¨‹åºç§Ÿé‡‘)
  - [éƒ¨ç½²åˆ°ä¸»ç½‘](#5-éƒ¨ç½²åˆ°ä¸»ç½‘)
  - [è¿è¡Œä¸»ç½‘éƒ¨ç½²è„šæœ¬](#6-è¿è¡Œä¸»ç½‘éƒ¨ç½²è„šæœ¬)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

## ç¯å¢ƒè¦æ±‚

- [Node.js](https://nodejs.org/) v14 æˆ–æ›´é«˜ç‰ˆæœ¬
- [Rust](https://www.rust-lang.org/tools/install) - ç¨³å®šç‰ˆæœ¬
- [Solana CLI](https://docs.solana.com/cli/install-solana-cli-tools) v1.14 æˆ–æ›´é«˜ç‰ˆæœ¬
- [Anchor CLI](https://www.anchor-lang.com/docs/installation) v0.26.0

## æœ¬åœ°å¼€å‘ç¯å¢ƒè®¾ç½®

### 1. å®‰è£… Rust

```bash
# å®‰è£… Rust
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
# ç¡®ä¿ä½¿ç”¨ç¨³å®šç‰ˆæœ¬
rustup default stable
```

### 2. å®‰è£… Solana å·¥å…·é“¾

```bash
sh -c "$(curl -sSfL https://release.solana.com/v1.14.17/install)"
```

å®‰è£…åæ·»åŠ åˆ°è·¯å¾„ï¼š

```bash
export PATH="$HOME/.local/share/solana/install/active_release/bin:$PATH"
```

### 3. å®‰è£… Anchor æ¡†æ¶

```bash
# å®‰è£… avm (Anchor ç‰ˆæœ¬ç®¡ç†å™¨)
cargo install --git https://github.com/coral-xyz/anchor avm --locked --force

# å®‰è£… Anchor 0.26.0
avm install 0.26.0
avm use 0.26.0
```

### 4. å…‹éš†å¹¶å®‰è£…é¡¹ç›®ä¾èµ–

```bash
git clone <é¡¹ç›®ä»“åº“URL>
cd solana-stake
npm install
```

## é¡¹ç›®æ„å»ºä¸æµ‹è¯•

### æ„å»ºé¡¹ç›®

```bash
# æ„å»ºæ‰€æœ‰ Solana ç¨‹åº
anchor build

# æ„å»ºç‰¹å®šç¨‹åº
anchor build --program-name cfx-stake-core
anchor build --program-name cfx-rewards
anchor build --program-name cfx-liquidity
anchor build --program-name chain-fox-dao
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
anchor test

# è¿è¡Œç‰¹å®šç¨‹åºçš„æµ‹è¯•
anchor test --program-name cfx-stake-core
anchor test --program-name cfx-rewards
anchor test --program-name cfx-liquidity
anchor test --program-name chain-fox-dao
```

### æµ‹è¯•è¦†ç›–èŒƒå›´

é¡¹ç›®æµ‹è¯•åŒ…æ‹¬ä»¥ä¸‹æ–¹é¢ï¼š

1. **å•å…ƒæµ‹è¯•**ï¼šæµ‹è¯•å„ä¸ªå‡½æ•°å’ŒæŒ‡ä»¤çš„æ­£ç¡®æ€§
2. **é›†æˆæµ‹è¯•**ï¼šæµ‹è¯•åˆçº¦ä¹‹é—´çš„äº¤äº’
3. **è¾¹ç¼˜æƒ…å†µæµ‹è¯•**ï¼šæµ‹è¯•é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæ¡ä»¶
4. **å®‰å…¨æµ‹è¯•**ï¼šæµ‹è¯•æƒé™æ§åˆ¶å’Œèµ„é‡‘å®‰å…¨

### æµ‹è¯•æ•°æ®å‡†å¤‡

æµ‹è¯•éœ€è¦ä»¥ä¸‹æ•°æ®ï¼š

1. **æµ‹è¯•ä»£å¸**ï¼šåˆ›å»ºæµ‹è¯• CFX ä»£å¸ç”¨äºè´¨æŠ¼
2. **æµ‹è¯•è´¦æˆ·**ï¼šåˆ›å»ºå¤šä¸ªæµ‹è¯•ç”¨æˆ·è´¦æˆ·
3. **æµ‹è¯•ææ¡ˆ**ï¼šåˆ›å»ºå„ç§ç±»å‹çš„æµ‹è¯•ææ¡ˆ

#### macOSç”¨æˆ·æ³¨æ„äº‹é¡¹

åœ¨macOSä¸Šä½¿ç”¨Anchorè¿›è¡Œæµ‹è¯•æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸éšè—å…ƒæ•°æ®æ–‡ä»¶ï¼ˆ._genesis.binï¼‰ç›¸å…³çš„é”™è¯¯ï¼š

```
Error: failed to start validator: Failed to create ledger at test-ledger: io error: Error checking to unpack genesis archive: Archive error: extra entry found: "._genesis.bin"
```

è¿™æ˜¯ç”±äºmacOSåœ¨å¤„ç†å‹ç¼©æ–‡ä»¶æ—¶åˆ›å»ºçš„éšè—å…ƒæ•°æ®æ–‡ä»¶å¯¼è‡´çš„ã€‚æˆ‘ä»¬å·²åœ¨Anchor.tomlä¸­é…ç½®äº†è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡ä»¥ä¸‹æ­¥éª¤ç¡®ä¿é¡ºåˆ©æµ‹è¯•ï¼š

1. æ¸…ç†ç°æœ‰çš„æµ‹è¯•è´¦æœ¬ç›®å½•ï¼š

```bash
rm -rf test-ledger .anchor/test-ledger
```

2. ç¡®ä¿Anchor.tomlåŒ…å«ä»¥ä¸‹é…ç½®ï¼š

```toml
[test]
startup_wait = 10000

[scripts]
test = "COPYFILE_DISABLE=1 yarn run mocha -t 1000000 tests/**/*.js"
```

3. ç„¶åè¿è¡Œæµ‹è¯•ï¼š

```bash
anchor test
```

è¿™å°†ä½¿ç”¨COPYFILE_DISABLEç¯å¢ƒå˜é‡é˜»æ­¢macOSåˆ›å»ºéšè—å…ƒæ•°æ®æ–‡ä»¶ï¼Œå¹¶å¢åŠ éªŒè¯èŠ‚ç‚¹çš„å¯åŠ¨ç­‰å¾…æ—¶é—´ã€‚

#### RPCç«¯å£å·²è¢«å ç”¨

å¦‚æœè¿è¡Œ`anchor test`æ—¶é‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š

```
Error: Your configured rpc port: 8899 is already in use
```

è¿™è¡¨ç¤ºå¯èƒ½å·²æœ‰ä¸€ä¸ªSolanaéªŒè¯èŠ‚ç‚¹æˆ–å…¶ä»–æœåŠ¡æ­£åœ¨ä½¿ç”¨ç«¯å£8899ã€‚å³ä½¿æ‚¨åˆšåˆšä½¿ç”¨`COPYFILE_DISABLE=1 solana-test-validator`å¯åŠ¨äº†éªŒè¯èŠ‚ç‚¹ï¼Œè¯¥é”™è¯¯ä¹Ÿå¯èƒ½å‡ºç°ã€‚

è§£å†³æ–¹æ¡ˆï¼š

1. æ£€æŸ¥å¹¶ç»ˆæ­¢æ‰€æœ‰solanaéªŒè¯èŠ‚ç‚¹è¿›ç¨‹ï¼š

```bash
# æŸ¥çœ‹å ç”¨8899ç«¯å£çš„è¿›ç¨‹
lsof -i :8899
# æˆ–
ps aux | grep solana-test-validator

# ç»ˆæ­¢æ‰€æœ‰solana-test-validatorè¿›ç¨‹
pkill solana-test-validator
```

2. ä¿®æ”¹Anchor.tomlæ–‡ä»¶ï¼Œåœ¨æµ‹è¯•è„šæœ¬ä¸­æ·»åŠ `--skip-local-validator`é€‰é¡¹ï¼š

```toml
[scripts]
test = "yarn run mocha -t 1000000 tests/**/*.js --skip-local-validator"
```

3. ç¡®ä¿å…ˆå¯åŠ¨éªŒè¯èŠ‚ç‚¹ï¼Œå†è¿è¡Œæµ‹è¯•ï¼š

```bash
# åœ¨ä¸€ä¸ªç»ˆç«¯å¯åŠ¨éªŒè¯èŠ‚ç‚¹
COPYFILE_DISABLE=1 solana-test-validator

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œæµ‹è¯•
anchor test
```

4. å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œå¯ä»¥å°è¯•ï¼š
   - é‡å¯è®¡ç®—æœºï¼Œå½»åº•æ¸…é™¤æ‰€æœ‰åå°è¿›ç¨‹
   - ä¿®æ”¹Anchor.tomlä¸­çš„provideré…ç½®ï¼Œä½¿ç”¨ä¸åŒçš„RPCç«¯å£ï¼š

   ```toml
   [provider]
   cluster = "Localnet"
   wallet = "/Users/eason/.config/solana/id.json"
   # è‡ªå®šä¹‰RPCç«¯å£
   # æ·»åŠ è¿™ä¸€è¡Œï¼Œä½¿ç”¨ä¸€ä¸ªæœªè¢«å ç”¨çš„ç«¯å£
   rpc_port = 8890
   ```

## æµ‹è¯•ç½‘éƒ¨ç½²

### 1. é…ç½® Solana ç½‘ç»œå’Œé’±åŒ…

```bash
# åˆ‡æ¢åˆ° devnet
solana config set --url https://api.devnet.solana.com

# åˆ›å»ºæ–°é’±åŒ…ï¼ˆå¦‚æœéœ€è¦ï¼‰
solana-keygen new -o ~/.config/solana/id.json

# ç¡®è®¤é…ç½®
solana config get
```

### 2. è·å–æµ‹è¯•ç½‘ SOL

```bash
# ä»æµ‹è¯•ç½‘æ°´é¾™å¤´è·å– SOL
solana airdrop 2
```

### 3. æ›´æ–°é¡¹ç›®é…ç½®

ç¼–è¾‘ `Anchor.toml` æ–‡ä»¶ä»¥é…ç½® devnet éƒ¨ç½²ï¼š

```toml
[provider]
cluster = "devnet"
wallet = "~/.config/solana/id.json"

[programs.devnet]
cfx_stake_core = "<æ›¿æ¢ä¸ºè´¨æŠ¼æ ¸å¿ƒç¨‹åºID>"
cfx_rewards = "<æ›¿æ¢ä¸ºå¥–åŠ±ç¨‹åºID>"
cfx_liquidity = "<æ›¿æ¢ä¸ºæµåŠ¨æ€§ç¨‹åºID>"
```

### 4. åœ¨æµ‹è¯•ç½‘éƒ¨ç½² CFX ä»£å¸ (SPL ä»£å¸)

åœ¨æµ‹è¯•ç½‘ä¸Šéƒ¨ç½²å’Œæµ‹è¯•è´¨æŠ¼ç³»ç»Ÿå‰ï¼Œéœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿçš„ CFX ä»£å¸ï¼š

```bash
# ç¡®ä¿å·²é…ç½®ä¸ºæµ‹è¯•ç½‘
solana config set --url https://api.devnet.solana.com

# åˆ›å»ºä»£å¸é“¸é€ è´¦æˆ· (9ä½å°æ•°)
spl-token create-token --decimals 9
# è¾“å‡ºä¼šæ˜¾ç¤º: Creating token <TOKEN_ADDRESS>
# è®°ä¸‹è¿™ä¸ª TOKEN_ADDRESSï¼Œè¿™å°±æ˜¯æ‚¨çš„ CFX ä»£å¸åœ°å€

# ä¸ºæ‚¨çš„é’±åŒ…åˆ›å»ºä¸€ä¸ªä»£å¸è´¦æˆ·
spl-token create-account <TOKEN_ADDRESS>

# é“¸é€ ä¸€äº›ä»£å¸ç”¨äºæµ‹è¯• (ä¾‹å¦‚ 10äº¿ä¸ªä»£å¸)
spl-token mint <TOKEN_ADDRESS> 1000000000

# æ£€æŸ¥æ‚¨çš„ä»£å¸ä½™é¢
spl-token balance <TOKEN_ADDRESS>
```

åœ¨éƒ¨ç½²è´¨æŠ¼ç³»ç»Ÿæ—¶ï¼Œæ‚¨éœ€è¦ä½¿ç”¨è¿™ä¸ªæ–°åˆ›å»ºçš„ä»£å¸åœ°å€ä½œä¸º CFX ä»£å¸çš„åœ°å€ï¼Œæ›´æ–°ç›¸å…³é…ç½®æ–‡ä»¶å’Œéƒ¨ç½²è„šæœ¬ã€‚

### 5. è®¡ç®—ç¨‹åºç§Ÿé‡‘

åœ¨éƒ¨ç½²å‰ï¼Œæ‚¨å¯ä»¥è®¡ç®—ç¨‹åºæ‰€éœ€çš„ç§Ÿé‡‘ï¼ˆå­˜å‚¨è´¹ç”¨ï¼‰ï¼š

```bash
# è®¡ç®—æœ¬åœ°ç½‘ç»œçš„ç§Ÿé‡‘
node migrations/calculate-rent.js --cluster=localnet

# è®¡ç®—å¼€å‘ç½‘çš„ç§Ÿé‡‘
node migrations/calculate-rent.js --cluster=devnet

# è®¡ç®—ä¸»ç½‘çš„ç§Ÿé‡‘
node migrations/calculate-rent.js --cluster=mainnet
```

### 5. éƒ¨ç½²åˆ°æµ‹è¯•ç½‘

```bash
# æ„å»ºé¡¹ç›®
anchor build

# è·å–ç¨‹åº ID
solana address -k target/deploy/cfx_stake_core-keypair.json
solana address -k target/deploy/cfx_rewards-keypair.json
solana address -k target/deploy/cfx_liquidity-keypair.json

# æ›´æ–° Anchor.toml å’Œå„ç¨‹åºçš„ lib.rs ä¸­çš„ç¨‹åº ID

# éƒ¨ç½²åˆ°æµ‹è¯•ç½‘
anchor deploy
```

### 6. è¿è¡Œéƒ¨ç½²è„šæœ¬

éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨éƒ¨ç½²æ‰€æœ‰æ‹†åˆ†çš„ç¨‹åºï¼ˆcfx-stake-coreã€cfx-rewardsã€cfx-liquidityï¼‰ï¼š

```bash
# é…ç½®å¹¶è¿è¡Œéƒ¨ç½²è„šæœ¬
anchor migrate --provider.cluster devnet
```

## ä¸»ç½‘éƒ¨ç½²

**æ³¨æ„ï¼š** éƒ¨ç½²åˆ°ä¸»ç½‘å‰ï¼Œè¯·ç¡®ä¿å½»åº•æµ‹è¯•æ‚¨çš„ç¨‹åºï¼Œå¹¶è€ƒè™‘è¿›è¡Œå®‰å…¨å®¡è®¡ã€‚

### 1. å‡†å¤‡ä¸»ç½‘é’±åŒ…

```bash
# åˆ›å»ºä¸“ç”¨çš„ä¸»ç½‘éƒ¨ç½²é’±åŒ…ï¼ˆå»ºè®®ï¼‰
solana-keygen new -o ~/.config/solana/mainnet-deployer.json

# åˆ‡æ¢åˆ°ä¸»ç½‘
solana config set --url https://api.mainnet-beta.solana.com
solana config set -k ~/.config/solana/mainnet-deployer.json
```

ç¡®ä¿ä¸»ç½‘é’±åŒ…ä¸­æœ‰è¶³å¤Ÿçš„ SOL æ”¯ä»˜éƒ¨ç½²å’Œäº¤æ˜“è´¹ç”¨ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œéƒ¨ç½²ä¸€ä¸ªä¸­ç­‰å¤§å°çš„ç¨‹åºé€šå¸¸éœ€è¦çº¦ 0.5-2 SOL ç”¨äºæ”¯ä»˜å­˜å‚¨ç§Ÿé‡‘å’Œäº¤æ˜“è´¹ç”¨ã€‚

### 2. æ›´æ–°é¡¹ç›®é…ç½®

ç¼–è¾‘ `Anchor.toml` æ–‡ä»¶ä»¥é…ç½®ä¸»ç½‘éƒ¨ç½²ï¼š

```toml
[provider]
cluster = "mainnet"
wallet = "~/.config/solana/mainnet-deployer.json"

[programs.mainnet]
solana_stake = "<æ›¿æ¢ä¸ºæ‚¨çš„ç¨‹åºID>"
```

### 3. åœ¨ä¸»ç½‘éƒ¨ç½² CFX ä»£å¸ (SPL ä»£å¸)

åœ¨ä¸»ç½‘ä¸Šéƒ¨ç½²è´¨æŠ¼ç³»ç»Ÿå‰ï¼Œéœ€è¦å…ˆåˆ›å»ºæˆ–ä½¿ç”¨ç°æœ‰çš„ CFX ä»£å¸ï¼š

```bash
# ç¡®ä¿å·²é…ç½®ä¸ºä¸»ç½‘
solana config set --url https://api.mainnet-beta.solana.com

# åˆ›å»ºä»£å¸é“¸é€ è´¦æˆ· (9ä½å°æ•°)
spl-token create-token --decimals 9
# è¾“å‡ºä¼šæ˜¾ç¤º: Creating token <TOKEN_ADDRESS>
# è®°ä¸‹è¿™ä¸ª TOKEN_ADDRESSï¼Œè¿™å°±æ˜¯æ‚¨çš„ CFX ä»£å¸åœ°å€

# ä¸ºæ‚¨çš„é’±åŒ…åˆ›å»ºä¸€ä¸ªä»£å¸è´¦æˆ·
spl-token create-account <TOKEN_ADDRESS>

# é“¸é€ ä»£å¸
spl-token mint <TOKEN_ADDRESS> <ä»£å¸æ•°é‡>
```

å¦‚æœæ‚¨å·²ç»æœ‰ç°æœ‰çš„ CFX ä»£å¸ï¼Œè¯·ä½¿ç”¨å…¶åœ°å€æ›´æ–°ç›¸å…³é…ç½®ã€‚

### 4. è®¡ç®—ä¸»ç½‘ç¨‹åºç§Ÿé‡‘

åœ¨éƒ¨ç½²åˆ°ä¸»ç½‘å‰ï¼Œè®¡ç®—ç¨‹åºæ‰€éœ€çš„ç§Ÿé‡‘éå¸¸é‡è¦ï¼Œä»¥ç¡®ä¿æ‚¨æœ‰è¶³å¤Ÿçš„ SOLï¼š

```bash
# è®¡ç®—ä¸»ç½‘çš„ç§Ÿé‡‘
node migrations/calculate-rent.js --cluster=mainnet
```

### 5. éƒ¨ç½²åˆ°ä¸»ç½‘

```bash
# æ„å»ºé¡¹ç›®
anchor build

# ç¡®è®¤ç¨‹åº ID
solana address -k target/deploy/cfx_stake_core-keypair.json
solana address -k target/deploy/cfx_rewards-keypair.json
solana address -k target/deploy/cfx_liquidity-keypair.json

# éƒ¨ç½²åˆ°ä¸»ç½‘
anchor deploy
```

### 5. è¿è¡Œä¸»ç½‘éƒ¨ç½²è„šæœ¬

éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨éƒ¨ç½²æ‰€æœ‰æ‹†åˆ†çš„ç¨‹åºï¼ˆcfx-stake-coreã€cfx-rewardsã€cfx-liquidityï¼‰ï¼š

```bash
# è¿è¡Œéƒ¨ç½²è„šæœ¬
anchor migrate --provider.cluster mainnet
```

### 7. éªŒè¯éƒ¨ç½²

```bash
# æ£€æŸ¥ç¨‹åºè´¦æˆ·
solana account <ç¨‹åºID>
```

## å®¢æˆ·ç«¯é›†æˆ

éƒ¨ç½²åï¼Œå‰ç«¯åº”ç”¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¿¡æ¯è¿æ¥åˆ°æ‚¨çš„ç¨‹åºï¼š

```javascript
const programId = "<æ‚¨çš„ç¨‹åºID>";
const connection = new Connection("<ç½‘ç»œURL>");
// ç»§ç»­ä½¿ç”¨ Anchor å®¢æˆ·ç«¯åº“ä¸æ‚¨çš„ç¨‹åºäº¤äº’
```

## åˆçº¦å¼€å‘æµç¨‹

Chain-Fox DAO é¡¹ç›®é‡‡ç”¨ä»¥ä¸‹å¼€å‘æµç¨‹ï¼š

1. **è®¾è®¡é˜¶æ®µ**ï¼š
   - ç¼–å†™è¯¦ç»†çš„æŠ€æœ¯è®¾è®¡æ–‡æ¡£
   - å®šä¹‰åˆçº¦æ¥å£å’Œæ•°æ®ç»“æ„
   - è®¾è®¡å®‰å…¨æœºåˆ¶å’Œæƒé™æ§åˆ¶

2. **å®ç°é˜¶æ®µ**ï¼š
   - æŒ‰ç…§è®¾è®¡æ–‡æ¡£å®ç°åˆçº¦ä»£ç 
   - ç¼–å†™å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
   - è¿›è¡Œä»£ç å®¡æŸ¥å’Œä¼˜åŒ–

3. **æµ‹è¯•é˜¶æ®µ**ï¼š
   - åœ¨æœ¬åœ°ç¯å¢ƒè¿›è¡Œå…¨é¢æµ‹è¯•
   - åœ¨æµ‹è¯•ç½‘è¿›è¡Œéƒ¨ç½²å’Œæµ‹è¯•
   - è¿›è¡Œå®‰å…¨å®¡è®¡å’Œæ¼æ´ä¿®å¤

4. **éƒ¨ç½²é˜¶æ®µ**ï¼š
   - å‡†å¤‡éƒ¨ç½²è„šæœ¬å’Œé…ç½®
   - è®¡ç®—ç¨‹åºç§Ÿé‡‘
   - éƒ¨ç½²åˆ°ä¸»ç½‘

5. **ç»´æŠ¤é˜¶æ®µ**ï¼š
   - ç›‘æ§åˆçº¦è¿è¡ŒçŠ¶æ€
   - å¤„ç†ç”¨æˆ·åé¦ˆå’Œé—®é¢˜
   - è§„åˆ’å’Œå®æ–½å‡çº§

### ä»£ç å®¡æŸ¥æ¸…å•

æ¯æ¬¡æäº¤ä»£ç å‰ï¼Œè¯·ç¡®ä¿ï¼š

- [ ] æ‰€æœ‰æµ‹è¯•éƒ½å·²é€šè¿‡
- [ ] ä»£ç ç¬¦åˆé¡¹ç›®ç¼–ç è§„èŒƒ
- [ ] å·²å¤„ç†æ‰€æœ‰è¾¹ç¼˜æƒ…å†µå’Œé”™è¯¯æ¡ä»¶
- [ ] æƒé™æ£€æŸ¥å·²æ­£ç¡®å®ç°
- [ ] æ•°å­¦è®¡ç®—å·²è€ƒè™‘æº¢å‡ºå’Œç²¾åº¦é—®é¢˜
- [ ] æ–‡æ¡£å’Œæ³¨é‡Šå·²æ›´æ–°

## å¤šç­¾é’±åŒ…è®¾ç½®

Chain-Fox DAO ä½¿ç”¨å¤šç­¾é’±åŒ…ç®¡ç†å›¢é˜Ÿèµ„é‡‘å’ŒæµåŠ¨æ€§ï¼Œç¡®ä¿èµ„é‡‘å®‰å…¨ã€‚å¤šç­¾é’±åŒ…çš„è¯¦ç»†è®¾ç½®å’Œæ“ä½œæµç¨‹å°†åœ¨å•ç‹¬çš„æ–‡æ¡£ä¸­æä¾›ã€‚

## å¸¸è§é—®é¢˜

### ç¼–è¯‘é”™è¯¯

å¦‚æœé‡åˆ°ä¸ Cargo.lock ç‰ˆæœ¬ç›¸å…³çš„é”™è¯¯ï¼Œå¯ä»¥å°è¯•ï¼š

```bash
# åˆ é™¤é”æ–‡ä»¶ï¼Œä½¿ç”¨ç¨³å®šç‰ˆé‡æ–°æ„å»º
rm Cargo.lock
rustup default stable
anchor build
```

### éƒ¨ç½²å¤±è´¥

å¦‚æœéƒ¨ç½²åˆ°æµ‹è¯•ç½‘æˆ–ä¸»ç½‘å¤±è´¥ï¼Œè¯·æ£€æŸ¥ï¼š

1. é’±åŒ…ä¸­æ˜¯å¦æœ‰è¶³å¤Ÿçš„ SOL
2. ç¨‹åº ID æ˜¯å¦æ­£ç¡®é…ç½®
3. RPC èŠ‚ç‚¹è¿æ¥æ˜¯å¦ç¨³å®š

å¯ä»¥å°è¯•ä½¿ç”¨è‡ªå®šä¹‰ RPC ç«¯ç‚¹ï¼š

```bash
solana config set --url https://your-custom-rpc.com
```

### æµ‹è¯•ç½‘/ä¸»ç½‘èµ„é‡‘

- æµ‹è¯•ç½‘ï¼šå¯ä»¥ä½¿ç”¨ `solana airdrop` å‘½ä»¤è·å–æµ‹è¯• SOL
- ä¸»ç½‘ï¼šéœ€è¦ä»äº¤æ˜“æ‰€æˆ–å…¶ä»–é’±åŒ…è½¬å…¥çœŸå® SOL

### ç¨‹åºå‡çº§

Solana ç¨‹åºé»˜è®¤æƒ…å†µä¸‹ä¸å¯å‡çº§ã€‚Chain-Fox DAO é¡¹ç›®ä½¿ç”¨ä»¥ä¸‹å‡çº§ç­–ç•¥ï¼š

1. **å¯å‡çº§è®¾è®¡**ï¼š
   - ç¨‹åºä½¿ç”¨ä»£ç†æ¨¡å¼è®¾è®¡ï¼Œå…è®¸é€»è¾‘å‡çº§
   - æ•°æ®è´¦æˆ·ä¸ç¨‹åºé€»è¾‘åˆ†ç¦»ï¼Œä¾¿äºå‡çº§

2. **å‡çº§æµç¨‹**ï¼š
   - å‡çº§æ‰§è¡Œéœ€è¦å¤šç­¾é’±åŒ…æˆæƒ
   - å‡çº§å‰è¿›è¡Œå…¨é¢æµ‹è¯•
   - å‡çº§åè¿›è¡ŒéªŒè¯å’Œç›‘æ§

3. **å‡çº§å‘½ä»¤**ï¼š
   ```bash
   # éƒ¨ç½²æ–°ç‰ˆæœ¬ç¨‹åº
   anchor upgrade --program-id <ç¨‹åºID> --program-buffer <æ–°ç¨‹åºç¼“å†²åŒº>
   ```


